{% extends 'base.html' %}
{% load static %}

{% block title %}ApexDev Studio | Vanguardia en Ingeniería Digital Exponencial{% endblock %}

{% block content %}
<!-- Hero Section - Dark, Premium & Hyper-Interactive -->
<section class="relative min-h-screen flex items-center justify-center overflow-hidden bg-black text-center">
    <div id="particles-js" class="absolute inset-0 z-0 opacity-35"></div>

    <div class="absolute inset-0 overflow-hidden z-0 opacity-30">
        <div class="absolute -top-60 -left-40 w-96 h-96 md:w-[550px] md:h-[550px] bg-accent-primary rounded-full blur-3xl animate-pulse-slow opacity-75"></div>
        <div class="absolute top-1/4 right-10 md:right-20 w-80 h-80 md:w-[500px] md:h-[500px] bg-accent-secondary rounded-full blur-3xl animate-pulse-slow animation-delay-2000 opacity-65"></div>
        <div class="absolute bottom-10 left-1/3 md:bottom-20 w-72 h-72 md:w-[450px] md:h-[450px] bg-accent-third rounded-full blur-3xl animate-pulse-slow animation-delay-4000 opacity-55"></div>
    </div>
    
    <div class="container relative px-4 mx-auto sm:px-6 lg:px-8 z-10 pt-20 pb-20">
        <div data-aos="fade-up" data-aos-delay="100">
            <div class="flex items-center justify-center space-x-3 mb-8">
                <span class="inline-block h-1.5 w-12 bg-accent-primary rounded-full"></span>
                <span class="text-accent-primary font-semibold text-lg tracking-wider">CREAMOS EL FUTURO DIGITAL</span>
            </div>
            
            <h1 class="text-5xl sm:text-6xl md:text-7xl lg:text-8xl font-bold font-display leading-tight text-white mb-8 text-hero-dynamic">
                Ingeniería <span class="text-gradient-animated">Exponencial</span>
            </h1>
            
            <p class="mt-6 mb-12 text-xl md:text-2xl leading-relaxed text-gray-200 max-w-3xl mx-auto">
                Transformamos ideas visionarias en soluciones digitales de impacto con tecnología de vanguardia y una creatividad sin límites.
            </p>
            
            <div class="flex flex-col sm:flex-row items-center justify-center gap-6 mt-12">
                <a href="#contact" 
                   class="group px-10 py-4 text-lg font-semibold text-white rounded-lg bg-gradient-to-r from-accent-primary to-accent-secondary hover:from-accent-primaryHover hover:to-accent-secondary/90 transform hover:scale-105 transition-all duration-300 ease-in-out shadow-xl hover:shadow-accent-primary/50 focus:outline-none focus:ring-4 focus:ring-accent-primary/50">
                    Inicia Tu Proyecto <i class="fas fa-arrow-right ml-2 transform group-hover:translate-x-1 transition-transform duration-300"></i>
                </a>
                <a href="#process"
                   class="group px-10 py-4 text-lg font-semibold rounded-lg text-accent-primary border-2 border-accent-primary/50 hover:bg-accent-primary/10 hover:text-accent-secondary transform hover:scale-105 transition-all duration-300 ease-in-out focus:outline-none focus:ring-4 focus:ring-accent-primary/30">
                    Nuestro Proceso <i class="fas fa-cogs ml-2 transform group-hover:rotate-12 transition-transform duration-300"></i>
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Development Process Sections with 3D Tilt Effect -->
<section id="process" class="py-16 lg:py-24 bg-dark-200">
    <div class="container px-4 mx-auto sm:px-6 lg:px-8">
        <div class="text-center mb-12 lg:mb-20" data-aos="fade-up">
            <h2 class="text-4xl lg:text-5xl font-bold font-display text-white">Nuestro <span class="text-gradient">Proceso Evolutivo</span></h2>
            <p class="mt-4 text-lg text-gray-400 max-w-2xl mx-auto">Cada fase, una obra de arte de ingeniería digital, diseñada para la excelencia y la innovación continua.</p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 lg:gap-12 process-cards-container">
            {# OPTION 1: If you are passing 'process_cards' from your Django view's context: #}
            {# {% for card in process_cards %}
            <div class="process-card bg-dark-300 rounded-xl shadow-2xl" data-aos="fade-up" data-aos-delay="{{ card.delay }}">
                <div class="process-card-inner p-8">
                    <div class="text-accent-primary text-4xl mb-6"><i class="{{ card.icon }}"></i></div>
                    <h3 class="text-2xl font-bold font-display text-white mb-4">{{ card.title }}</h3>
                    <p class="text-gray-400 leading-relaxed">{{ card.text }}</p>
                </div>
            </div>
            {% endfor %} #}

            {# OPTION 2: If you prefer hardcoding the cards (remove or comment out OPTION 1 if using this): #}
            {# This ensures no 'for' loop is initiated if you're not using Django context for cards #}
            <div class="process-card bg-dark-300 rounded-xl shadow-2xl" data-aos="fade-up" data-aos-delay="100">
                <div class="process-card-inner p-8">
                    <div class="text-accent-primary text-4xl mb-6"><i class="fas fa-search-plus"></i></div>
                    <h3 class="text-2xl font-bold font-display text-white mb-4">1. Descubrimiento y Estrategia</h3>
                    <p class="text-gray-400 leading-relaxed">Entendemos tu visión, el mercado y definimos una hoja de ruta clara para el éxito digital.</p>
                </div>
            </div>
            <div class="process-card bg-dark-300 rounded-xl shadow-2xl" data-aos="fade-up" data-aos-delay="200">
                <div class="process-card-inner p-8">
                    <div class="text-accent-primary text-4xl mb-6"><i class="fas fa-drafting-compass"></i></div>
                    <h3 class="text-2xl font-bold font-display text-white mb-4">2. Diseño UI/UX Centrado en el Humano</h3>
                    <p class="text-gray-400 leading-relaxed">Creamos interfaces intuitivas y experiencias memorables que cautivan y convierten.</p>
                </div>
            </div>
            <div class="process-card bg-dark-300 rounded-xl shadow-2xl" data-aos="fade-up" data-aos-delay="300">
                <div class="process-card-inner p-8">
                    <div class="text-accent-primary text-4xl mb-6"><i class="fas fa-code-branch"></i></div>
                    <h3 class="text-2xl font-bold font-display text-white mb-4">3. Desarrollo Ágil y Robusto</h3>
                    <p class="text-gray-400 leading-relaxed">Tecnologías avanzadas para construir soluciones escalables, seguras y de alto rendimiento.</p>
                </div>
            </div>
            <div class="process-card bg-dark-300 rounded-xl shadow-2xl" data-aos="fade-up" data-aos-delay="400">
                <div class="process-card-inner p-8">
                    <div class="text-accent-primary text-4xl mb-6"><i class="fas fa-vial-virus"></i></div>
                    <h3 class="text-2xl font-bold font-display text-white mb-4">4. Pruebas Rigurosas y QA Impecable</h3>
                    <p class="text-gray-400 leading-relaxed">Aseguramos calidad y funcionamiento perfecto a través de procesos de testing exhaustivos.</p>
                </div>
            </div>
            <div class="process-card bg-dark-300 rounded-xl shadow-2xl" data-aos="fade-up" data-aos-delay="500">
                <div class="process-card-inner p-8">
                    <div class="text-accent-primary text-4xl mb-6"><i class="fas fa-rocket"></i></div>
                    <h3 class="text-2xl font-bold font-display text-white mb-4">5. Despliegue Estratégico y Lanzamiento</h3>
                    <p class="text-gray-400 leading-relaxed">Gestionamos el lanzamiento eficientemente, asegurando una transición suave a producción.</p>
                </div>
            </div>
            <div class="process-card bg-dark-300 rounded-xl shadow-2xl" data-aos="fade-up" data-aos-delay="600">
                <div class="process-card-inner p-8">
                    <div class="text-accent-primary text-4xl mb-6"><i class="fas fa-infinity"></i></div>
                    <h3 class="text-2xl font-bold font-display text-white mb-4">6. Soporte Evolutivo y Crecimiento</h3>
                    <p class="text-gray-400 leading-relaxed">Mantenimiento proactivo y planes de mejora para que tu solución digital siga adaptándose.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- React Code Typing Simulation Section - Enhanced -->
<section class="py-16 lg:py-24 bg-black">
    <div class="container px-4 mx-auto sm:px-6 lg:px-8">
        <div class="text-center mb-12 lg:mb-16" data-aos="fade-up">
            <h2 class="text-4xl lg:text-5xl font-bold font-display text-white">Código <span class="text-gradient">Vivo</span>: Nuestra Maestría Tecnológica</h2>
            <p class="mt-4 text-lg text-gray-400 max-w-2xl mx-auto">Observa la precisión y elegancia con la que construimos el futuro digital, línea por línea.</p>
        </div>

        <div class="max-w-4xl mx-auto bg-dark-200 rounded-xl shadow-2xl overflow-hidden" data-aos="zoom-in-up" data-aos-duration="1000">
            <div class="bg-dark-300 px-4 py-3 flex items-center border-b border-dark-100">
                <span class="w-3.5 h-3.5 bg-red-500 rounded-full mr-2 border border-red-700"></span>
                <span class="w-3.5 h-3.5 bg-yellow-400 rounded-full mr-2 border border-yellow-600"></span>
                <span class="w-3.5 h-3.5 bg-green-500 rounded-full border border-green-700"></span>
                <span class="ml-auto text-xs text-gray-500 font-mono">/components/ApexEngine.jsx</span>
            </div>
            <div class="flex">
                <div id="line-numbers" class="p-6 pr-3 text-right text-gray-600 font-mono text-sm bg-dark-300/30 select-none">
                    {# Line numbers will be populated by JS #}
                </div>
                <div id="code-editor" class="flex-1 p-6 text-sm font-mono leading-relaxed min-h-[350px] lg:min-h-[450px] relative">
                    <pre><code id="typed-code"></code></pre>
                    <span id="cursor" class="animate-pulse">|</span>
                </div>
            </div>
            <div id="simulated-output" class="bg-dark-300/50 p-4 border-t border-dark-100 text-xs font-mono text-gray-400 min-h-[80px]">
                <span class="output-prompt text-accent-secondary">&gt; </span>Compilando ApexEngine.jsx...
            </div>
        </div>
    </div>
</section>

<!-- "Trusted by" Section -->
<section class="py-16 lg:py-24 bg-dark-200">
    <div class="container px-4 mx-auto sm:px-6 lg:px-8" data-aos="fade-up">
        <p class="text-sm font-medium text-center text-gray-500 mb-8 tracking-widest uppercase">CONFIAN EN NOSOTROS EMPRESAS INNOVADORAS</p>
        <div class="flex flex-wrap items-center justify-center gap-x-10 gap-y-6 sm:gap-x-12 md:gap-x-16 opacity-70">
            <img src="https://cdn.worldvectorlogo.com/logos/airbnb.svg" alt="Airbnb" class="h-7 grayscale hover:grayscale-0 transition-all duration-300 transform hover:scale-110">
            <img src="https://cdn.worldvectorlogo.com/logos/spotify-1.svg" alt="Spotify" class="h-8 grayscale hover:grayscale-0 transition-all duration-300 transform hover:scale-110">
            <img src="https://cdn.worldvectorlogo.com/logos/slack-1.svg" alt="Slack" class="h-7 grayscale hover:grayscale-0 transition-all duration-300 transform hover:scale-110">
            <img src="https://cdn.worldvectorlogo.com/logos/netflix-3.svg" alt="Netflix" class="h-6 grayscale hover:grayscale-0 transition-all duration-300 transform hover:scale-110">
        </div>
    </div>
</section>

<!-- Libraries -->
<script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
{# <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script> #}
{# <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/ScrollTrigger.min.js"></script> #}

<script>
document.addEventListener('DOMContentLoaded', function () {
    if (document.getElementById('particles-js')) {
        particlesJS('particles-js', {
            "particles": {"number": {"value":100,"density": {"enable":true,"value_area":800}},"color": {"value":"#ffffff"},"shape": {"type":"circle"},"opacity": {"value":0.3,"random":true,"anim": {"enable":true,"speed":0.3,"opacity_min":0.05,"sync":false}},"size": {"value":2.5,"random":true,"anim": {"enable":false,"speed":40,"size_min":0.1,"sync":false}},"line_linked": {"enable":true,"distance":130,"color":"#ffffff","opacity":0.15,"width":1},"move": {"enable":true,"speed":1.5,"direction":"none","random":true,"straight":false,"out_mode":"out","bounce":false}},
            "interactivity": {"detect_on":"canvas","events": {"onhover": {"enable":true,"mode":"grab"},"onclick": {"enable":true,"mode":"push"},"resize":true},"modes": {"grab": {"distance":120,"line_linked": {"opacity":0.3}},"bubble": {"distance":300,"size":30,"duration":2,"opacity":8,"speed":3},"push": {"particles_nb":3}}},
            "retina_detect":true
        });
    }

    const codeElement = document.getElementById('typed-code');
    const cursorElement = document.getElementById('cursor');
    const lineNumbersElement = document.getElementById('line-numbers');
    const simulatedOutputElement = document.getElementById('simulated-output');

    if (codeElement && cursorElement && lineNumbersElement && simulatedOutputElement) {
        {% verbatim %}
        const reactCodeLines = [
            { text: "import React, { useState, useEffect } from 'react';", type: 'keyword' },
            { text: "import { motion } from 'framer-motion';", type: 'keyword'},
            { text: "", type: 'normal' },
            { text: "const ApexEngine = ({ title }) => {", type: 'normal' },
            { text: "  const [status, setStatus] = useState('Initializing...');", type: 'normal' },
            { text: "  const [isCompiled, setIsCompiled] = useState(false);", type: 'normal' },
            { text: "", type: 'normal' },
            { text: "  useEffect(() => {", type: 'keyword' },
            { text: "    setStatus('Compiling module...');", type: 'output' },
            { text: "    const timer = setTimeout(() => {", type: 'normal' },
            { text: "      setStatus(`Module '${title}' compiled successfully!`);", type: 'output' },
            { text: "      setIsCompiled(true);", type: 'normal' },
            { text: "    }, 2500);", type: 'normal' },
            { text: "    return () => clearTimeout(timer);", type: 'keyword' },
            { text: "  }, [title]);", type: 'keyword' },
            { text: "", type: 'normal' },
            { text: "  return (", type: 'keyword' },
            { text: "    <motion.div ", type: 'tag' },
            { text: "      className=\"apex-output-display\"", type: 'attribute' },
            { text: "      initial={{ opacity: 0, y: 20 }}", type: 'attribute' },
            { text: "      animate={{ opacity: isCompiled ? 1 : 0, y: isCompiled ? 0 : 20 }}", type: 'attribute' },
            { text: "      transition={{ duration: 0.5 }} >", type: 'tag' },
            { text: "      <h2 className=\"text-accent-primary\">{title}</h2>", type: 'tag' },
            { text: "      <p className=\"status-text\">{status}</p>", type: 'tag' },
            { text: "    </motion.div>", type: 'tag' },
            { text: "  );", type: 'keyword' },
            { text: "};", type: 'normal' },
            { text: "", type: 'normal' },
            { text: "export default ApexEngine;", type: 'keyword' }
        ];
        {% endverbatim %}

        let lineIndex = 0;
        let charIndex = 0;
        const typingSpeed = 50;
        const lineDelay = 200;
        let currentLineNumber = 0;

        function updateLineNumbers() {
            lineNumbersElement.innerHTML = '';
            for (let i = 0; i <= currentLineNumber; i++) {
                const div = document.createElement('div');
                div.textContent = i + 1;
                lineNumbersElement.appendChild(div);
            }
        }
        updateLineNumbers();

        function updateSimulatedOutput(text, isCommand = false) {
            if (isCommand) {
                simulatedOutputElement.innerHTML = `<span class="output-prompt text-accent-secondary">&gt; </span>${text}`;
            } else {
                const newLine = document.createElement('div');
                newLine.innerHTML = `<span class="output-prompt text-gray-500">&nbsp;&nbsp;</span>${text}`;
                simulatedOutputElement.appendChild(newLine);
            }
            simulatedOutputElement.scrollTop = simulatedOutputElement.scrollHeight;
        }

        function typeCode() {
            if (lineIndex < reactCodeLines.length) {
                const currentLine = reactCodeLines[lineIndex];

                if (charIndex === 0) {
                    if (lineIndex > 0) codeElement.appendChild(document.createElement('br'));
                    currentLineNumber = lineIndex;
                    updateLineNumbers();
                    if (currentLine.type === 'output') {
                        updateSimulatedOutput(currentLine.text);
                    }
                }
                
                if (charIndex < currentLine.text.length && currentLine.type !== 'output') {
                    let charToType = currentLine.text.charAt(charIndex);
                    let span = document.createElement('span');
                    const remainingText = currentLine.text.substring(charIndex);

                    if (remainingText.match(/^(import|export|default|const|let|var|function|return|true|false|null|if|else|for|while|switch|case|break|continue|new|this|typeof|instanceof|delete|try|catch|finally|async|await|yield|from|useEffect|useState)\b/)) {
                        span.className = 'code-keyword';
                    } else if (remainingText.match(/^['"`]/)) {
                        let endQuoteIndex = remainingText.indexOf(charToType, 1);
                        if (endQuoteIndex === -1) endQuoteIndex = remainingText.length -1;
                        span.className = 'code-string';
                        span.textContent = remainingText.substring(0, endQuoteIndex + 1);
                        charIndex += endQuoteIndex;
                    } else if (remainingText.match(/^\/\/.*/)) {
                        span.className = 'code-comment';
                        span.textContent = remainingText;
                        charIndex = currentLine.text.length -1;
                    } else if (remainingText.match(/^<\/?([A-Za-z][A-Za-z0-9]*)\b/)) {
                        span.className = 'code-tag';
                    } else if (remainingText.match(/^[A-Z][a-zA-Z0-9]*\b/)) {
                        span.className = 'code-component';
                    } else if (remainingText.match(/^[a-z][A-Za-z0-9_]*\s*=\s*".*?"/)) { 
                        span.className = 'code-attribute';
                    } else {
                        span.className = 'code-normal';
                    }
                    
                    if (span.textContent === '') span.textContent = charToType;
                    codeElement.appendChild(span);
                    charIndex++;
                    setTimeout(typeCode, typingSpeed);

                } else {
                    lineIndex++;
                    charIndex = 0;
                    if (lineIndex < reactCodeLines.length && reactCodeLines[lineIndex].text === "" && lineIndex > 0) {
                         codeElement.appendChild(document.createElement('br'));
                         currentLineNumber = lineIndex;
                         updateLineNumbers();
                    }
                    setTimeout(typeCode, lineDelay);
                }
            } else {
                cursorElement.style.display = 'none';
                updateSimulatedOutput("ApexEngine.jsx compiled. Ready.", true);
            }
        }
        
        const codeEditorElement = document.getElementById('code-editor');
        if (codeEditorElement) { // Check if the element exists before observing
            const codeObserver = new IntersectionObserver((entries) => {
                if(entries[0].isIntersecting){
                    updateSimulatedOutput("Initiating ApexDev Code Simulation...", true);
                    typeCode();
                    codeObserver.disconnect(); 
                }
            }, { threshold: 0.2 }); 
            codeObserver.observe(codeEditorElement);
        }
    }

    const animationDelayElements = document.querySelectorAll('[class*="animation-delay-"]');
    animationDelayElements.forEach(el => { 
        const delayClass = Array.from(el.classList).find(cls => cls.startsWith('animation-delay-'));
        if (delayClass) {
            const delay = delayClass.split('-').pop();
            el.style.animationDelay = `${parseInt(delay) / 1000}s`;
        }
     });

    const cards = document.querySelectorAll('.process-card');
    cards.forEach(card => {
        const cardInner = card.querySelector('.process-card-inner');
        card.addEventListener('mousemove', (e) => {
            const rect = card.getBoundingClientRect();
            const x = e.clientX - rect.left - rect.width / 2;
            const y = e.clientY - rect.top - rect.height / 2;
            const rotateY = (x / (rect.width / 2)) * 10; 
            const rotateX = -(y / (rect.height / 2)) * 10;
            cardInner.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale3d(1.03, 1.03, 1.03)`;
        });
        card.addEventListener('mouseleave', () => {
            cardInner.style.transform = 'perspective(1000px) rotateX(0) rotateY(0) scale3d(1, 1, 1)';
        });
    });
});
</script>

<style>
/* Hero Text Dynamic Animation Placeholder */
.text-hero-dynamic {
    /* animation: reveal-text 1s ease-out forwards; */
    /* opacity: 0; */
}

/* 3D Tilt Effect for Process Cards */
.process-card {
    transform-style: preserve-3d;
}
.process-card-inner {
    transition: transform 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    transform-style: preserve-3d;
    will-change: transform;
}

/* Styles for Code Typing Animation - Enhanced */
#code-editor {
    background-color: #161821; 
    color: #E0E0E0; 
    border-bottom-left-radius: 0; 
    border-bottom-right-radius: 0;
    overflow-x: auto; 
    position: relative;
}
#line-numbers {
    background-color: #1a1d29; 
    border-right: 1px solid #2a2f42;
}

#typed-code .code-keyword { color: #FF79C6; }
#typed-code .code-string { color: #F1FA8C; }
#typed-code .code-comment { color: #6272A4; font-style: italic; }
#typed-code .code-tag { color: #8BE9FD; } 
#typed-code .code-attribute { color: #BD93F9; } 
#typed-code .code-component { color: #50FA7B; } 
#typed-code .code-normal { color: #E0E0E0; }

#cursor {
    color: #FF79C6; 
    font-weight: bold;
    animation: blink 0.9s step-end infinite;
}

@keyframes blink {
    from, to { opacity: 1; }
    50% { opacity: 0; }
}

#simulated-output {
    background-color: #1a1d29; 
    border-top: 1px solid #2a2f42;
    max-height: 120px;
    overflow-y: auto;
}
.output-prompt {
    user-select: none;
}

.text-gradient-animated {
    background-image: linear-gradient(to right, theme('colors.accent.primary'), theme('colors.accent.secondary'), theme('colors.accent.third'), theme('colors.accent.secondary'), theme('colors.accent.primary'));
    background-size: 250% auto;
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    animation: shimmer-text 5s linear infinite;
}

@keyframes shimmer-text {
    0% { background-position: 250% center; }
    100% { background-position: 0% center; }
}

#particles-js {
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;
    z-index: 0;
}
.animation-delay-2000 { animation-delay: 2s !important; }
.animation-delay-4000 { animation-delay: 4s !important; }
</style>

{% endblock %}